
================================================================================
UAD INVOICE GENERATION STARTED
================================================================================

[2025-09-04T11:52:40.633Z] INFO: Sales Order Details
{
  "soId": "cmf40qtn20001qlmcwrmsvlc4",
  "soStartDate": "2025-05-01T00:00:00.000Z",
  "soEndDate": "2026-08-31T00:00:00.000Z",
  "billingCycle": "monthly ",
  "billingDay": 15,
  "currency": "INR"
}
[2025-09-04T11:52:40.633Z] INFO: UAD Details
{
  "uadId": "cmf5cjwhn0009ql90ciqltu9z",
  "uadStartDate": "2025-05-07T00:00:00.000Z",
  "uadEndDate": "2025-07-30T00:00:00.000Z",
  "factoryId": "cmf40rd4y0007qlmcbdmp7uq0",
  "notes": "None"
}
[2025-09-04T11:52:40.633Z] INFO: Product Line Items
[
  {
    "itemNumber": 1,
    "productName": "Advisory Solutions",
    "zohoItemId": "2031676000000053573",
    "uadQuantity": 50,
    "ratePerUnit": 100,
    "totalValue": 5000
  }
]
[2025-09-04T11:52:40.633Z] INFO: Total UAD Value
{
  "totalValue": 5000
}

================================================================================
CYCLE GENERATION LOGIC
================================================================================

[2025-09-04T11:52:40.634Z] INFO: Date Analysis
{
  "soStart": "2025-05-01",
  "soEnd": "2026-08-31",
  "uadStart": "2025-05-07",
  "uadEnd": "2025-07-30"
}
[2025-09-04T11:52:40.635Z] INFO: First Cycle End Calculation
{
  "uadStart": "2025-05-07",
  "billingCycle": "monthly ",
  "billingDay": 15,
  "firstCycleEnd": "2025-05-14"
}

================================================================================
CYCLE 1 ANALYSIS
================================================================================

[2025-09-04T11:52:40.635Z] INFO: Cycle 1 Details
{
  "cycleStart": "2025-05-01",
  "cycleEnd": "2025-05-14",
  "cycleDuration": 14
}
[2025-09-04T11:52:40.635Z] INFO: Overlap Calculation
{
  "maxCalculation": {
    "cycleStart": "2025-05-01",
    "uadStart": "2025-05-07",
    "soStart": "2025-05-01",
    "result": "2025-05-07"
  },
  "minCalculation": {
    "cycleEnd": "2025-05-14",
    "uadEnd": "2025-07-30",
    "soEnd": "2026-08-31",
    "result": "2025-05-14"
  },
  "overlapDuration": 8
}
[2025-09-04T11:52:40.635Z] INFO: Valid Overlap - Processing Cycle
{
  "status": "PROCESSING"
}
[2025-09-04T11:52:40.635Z] INFO: Full Cycle Check
{
  "overlapStartTime": 1746576000000,
  "cycleStartTime": 1746057600000,
  "overlapEndTime": 1747247400000,
  "cycleEndTime": 1747247400000,
  "startMatch": false,
  "endMatch": true,
  "isFullCycle": false
}

================================================================================
CYCLE 2 ANALYSIS
================================================================================

[2025-09-04T11:52:41.005Z] INFO: Cycle 2 Details
{
  "cycleStart": "2025-06-15",
  "cycleEnd": "2025-06-14",
  "cycleDuration": 0
}
[2025-09-04T11:52:41.006Z] INFO: Overlap Calculation
{
  "maxCalculation": {
    "cycleStart": "2025-06-15",
    "uadStart": "2025-05-07",
    "soStart": "2025-05-01",
    "result": "2025-06-15"
  },
  "minCalculation": {
    "cycleEnd": "2025-06-14",
    "uadEnd": "2025-07-30",
    "soEnd": "2026-08-31",
    "result": "2025-06-14"
  },
  "overlapDuration": 0
}
[2025-09-04T11:52:41.007Z] INFO: Empty Overlap - Skipping Cycle
{
  "reason": "Overlap start (2025-06-15) > Overlap end (2025-06-14)",
  "cycleStart": "2025-06-15",
  "uadEnd": "2025-07-30",
  "shouldTerminate": false
}

================================================================================
CYCLE 3 ANALYSIS
================================================================================

[2025-09-04T11:52:41.007Z] INFO: Cycle 3 Details
{
  "cycleStart": "2025-07-15",
  "cycleEnd": "2025-07-14",
  "cycleDuration": 0
}
[2025-09-04T11:52:41.008Z] INFO: Overlap Calculation
{
  "maxCalculation": {
    "cycleStart": "2025-07-15",
    "uadStart": "2025-05-07",
    "soStart": "2025-05-01",
    "result": "2025-07-15"
  },
  "minCalculation": {
    "cycleEnd": "2025-07-14",
    "uadEnd": "2025-07-30",
    "soEnd": "2026-08-31",
    "result": "2025-07-14"
  },
  "overlapDuration": 0
}
[2025-09-04T11:52:41.008Z] INFO: Empty Overlap - Skipping Cycle
{
  "reason": "Overlap start (2025-07-15) > Overlap end (2025-07-14)",
  "cycleStart": "2025-07-15",
  "uadEnd": "2025-07-30",
  "shouldTerminate": false
}

================================================================================
CYCLE 4 ANALYSIS
================================================================================

[2025-09-04T11:52:41.009Z] INFO: Cycle 4 Details
{
  "cycleStart": "2025-08-15",
  "cycleEnd": "2025-08-14",
  "cycleDuration": 0
}
[2025-09-04T11:52:41.009Z] INFO: Overlap Calculation
{
  "maxCalculation": {
    "cycleStart": "2025-08-15",
    "uadStart": "2025-05-07",
    "soStart": "2025-05-01",
    "result": "2025-08-15"
  },
  "minCalculation": {
    "cycleEnd": "2025-08-14",
    "uadEnd": "2025-07-30",
    "soEnd": "2026-08-31",
    "result": "2025-07-30"
  },
  "overlapDuration": -15
}
[2025-09-04T11:52:41.010Z] INFO: Empty Overlap - Skipping Cycle
{
  "reason": "Overlap start (2025-08-15) > Overlap end (2025-07-30)",
  "cycleStart": "2025-08-15",
  "uadEnd": "2025-07-30",
  "shouldTerminate": true
}

================================================================================
FINAL SUMMARY
================================================================================

[2025-09-04T11:52:41.011Z] INFO: Invoice Generation Summary
{
  "totalCyclesProcessed": 3,
  "totalInvoicesGenerated": 1,
  "finalCumulativeUnits": 12.9032,
  "finalCumulativeAmount": 1290.32,
  "uadTotalValue": 5000,
  "invoices": [
    {
      "id": "cmf5cjwzj000dql905tgpbagh",
      "amount": 1290.32,
      "prorated": true,
      "cycleStart": "2025-05-01T00:00:00.000Z",
      "cycleEnd": "2025-05-14T18:30:00.000Z"
    }
  ]
}
